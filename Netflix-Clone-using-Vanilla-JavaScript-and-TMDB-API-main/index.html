<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Home | Netflix Manish</title>
		<link rel="stylesheet" href="main.css" />
		<script src="app.js"></script>
	</head>
	<body>
		<!-- navbar -->

		<div class="nav">
			<div class="nav__left">
	<a href="landing.html"><img class="nav_logo" src="logo.svg" alt="" /></a>
				
			</div>
			<div class="nav__right">
				<img src="avatar.png" class="nav_avatar" alt="" />
			</div>
			
		</div>

		<!-- banner -->
		<header id="banner">
			
			<div id="banner__contents">
				<h1 id="banner__title"></h1>
				<div id="banner__buttons">
					
					<button id="banner__button">Play</button>
					<button id="banner__button">My List</button>
				</div>
				<p id="banner__description"></p>
			</div>
			<div id="banner__fadeBottom"></div>
		</header>

		<!-- row -->
		<!-- <div id="headrow">
			<div class="row">
				<h2 class="row__title"></h2>
				<div class="row__posters"></div>
			</div>
		</div> -->
		<div class="container mt-3">
			<nav class="navbar navbar-expand-lg navbar-light bg-light">
				<!-- <a class="navbar-brand" href="index.html">Product list</a>
				<button
					class="navbar-toggler"
					type="button"
					data-toggle="collapse"
					data-target="#navbarNav"
					aria-controls="navbarNav"
					aria-expanded="false"
					aria-label="Toggle navigation"
				>
					<span class="navbar-toggler-icon"></span>
				</button> -->
                	<a class="navbar-brand" href="boxoffice.html">Create Movie</a>
				<button
					class="navbar-toggler"
					type="button"
					data-toggle="collapse"
					data-target="#navbarNav"
					aria-controls="navbarNav"
					aria-expanded="false"
					aria-label="Toggle navigation"
				>
					<span class="navbar-toggler-icon"></span>
				</button>
				<!-- <div class="collapse navbar-collapse" id="navbarNav">
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link" href="backoffice.html"></a>
								Create Product </span></a
							>
						</li>

						<!-- <li class="nav-item">
							<a class="nav-link" href="#">Pricing</a>
						</li>
						<li class="nav-item">
							<a
								class="nav-link disabled"
								href="#"
								tabindex="-1"
								aria-disabled="true"
								>Disabled</a
							>
						</li> -->
					</ul>
				</div> 
			</nav>
		</div>
		<div class="container mt-4 mb-4">
			<div class="spinner-border text-secondary" role="status">
               <span class="sr-only">Loading...</span>
</div>
		
		</div>
		<!-- <div class="row">
			<h3 class="row_title" style="color: aliceblue;">Action Movies</h3>
			<div class="container ">
				<div class="row row_posters product-wrapper product" onscroll="getScrollVal()">
			
			</div>
		</div>
		</div> -->

		
			<h3 class="row_title" style="color: aliceblue;">Action Movies</h3>
			<div class="container ">
				<div class="row row_posters product-wrapper product" onscroll="getScrollVal()">
			
			</div>
			<h3 class="row_title" style="color: aliceblue;">Drama Movies</h3>
			<div class="container ">
				<div class="row row_posters product-drama" onscroll="getScrollVal()">
			
			</div>
			<h3 class="row_title" style="color: aliceblue;">Trending Movies</h3>
			<div class="container ">
				<div class="row row_posters product-trending" onscroll="getScrollVal()">
			
			</div>
		</div>
	
		
		<script>
		
			
			window.onload = async () => {
				const getData = async () => {
					let url = '  https://striveschool-api.herokuapp.com/api/movies/action';
					const container = document.querySelector('.product-wrapper');
					container.innerHTML = '';
					try {
						const res = await fetch(url, {
							headers: {
								Authorization:
									'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTFjZWMwMTJkNTI2MjAwMTViNmRjOGYiLCJpYXQiOjE2MjkyODUzNzcsImV4cCI6MTYzMDQ5NDk3N30.n3m29qn0yRjmjhZmT7o8YOt7-tA7QDJdS9mnt2biQwQ',
							},
						});
						if(res.ok){
							const spinner =document.querySelector(".spinner-border") 
							spinner.remove()
							const data = await res.json();
						data.forEach((element) => {
                            // console.log(element)
							return (container.innerHTML += `
                            <div class="col-6 col-md-4 col-xl-3 mt-3">
                        <div class="card" >
  <img src=${element.imageUrl} class="card-img-top" alt="...">
  <div class="card-body">
    
  </div>
 <a href ="details.html?id=${element._id} "> Movie Details </a>

</div> 
</div>
                            `);
						});
						}
					
					} catch (err) {
						console.log(err);
					}
				};
				
const getDrama = async () => {
					let url = '  https://striveschool-api.herokuapp.com/api/movies/drama';
					const container = document.querySelector('.product-drama');
					container.innerHTML = '';
					try {
						const res = await fetch(url, {
							headers: {
								Authorization:
									'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTFjZWMwMTJkNTI2MjAwMTViNmRjOGYiLCJpYXQiOjE2MjkyODUzNzcsImV4cCI6MTYzMDQ5NDk3N30.n3m29qn0yRjmjhZmT7o8YOt7-tA7QDJdS9mnt2biQwQ',
							},
						});
						if(res.ok){
							const spinner =document.querySelector(".spinner-border") 
						
							const data = await res.json();
						data.forEach((element) => {
                            // console.log(element)
							return (container.innerHTML += `
                            <div class="col-6 col-md-4 col-xl-3 mt-3">
                        <div class="card" >
  <img src=${element.imageUrl} class="card-img-top" alt="...">
  <div class="card-body">
    
  </div>
 <a href ="details.html?id=${element._id} "> Movie Details </a>

</div> 
</div>
                            `);
						});
						}
					
					} catch (err) {
						console.log(err);
					}
				};
				const getTrending = async () => {
					let url = '  https://striveschool-api.herokuapp.com/api/movies/Trending';
					const container = document.querySelector('.product-trending');
					container.innerHTML = '';
					try {
						const res = await fetch(url, {
							headers: {
								Authorization:
									'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTFjZWMwMTJkNTI2MjAwMTViNmRjOGYiLCJpYXQiOjE2MjkyODUzNzcsImV4cCI6MTYzMDQ5NDk3N30.n3m29qn0yRjmjhZmT7o8YOt7-tA7QDJdS9mnt2biQwQ',
							},
						});
						if(res.ok){
							const spinner =document.querySelector(".spinner-border") 
						
							const data = await res.json();
						data.forEach((element) => {
                            // console.log(element)
							return (container.innerHTML += `
                            <div class="col-6 col-md-4 col-xl-3 mt-3">
                        <div class="card" >
  <img src=${element.imageUrl} class="card-img-top" alt="...">
  <div class="card-body">
    
  </div>
 <a href ="details.html?id=${element._id} "> Movie Details </a>

</div> 
</div>
                            `);
						});
						}
					
					} catch (err) {
						console.log(err);
					}
				};
				await getData();
				await getDrama();
				await getTrending()

			};
           
		</script>
	</body>
</html>
